name: GitHub Actions Demo
description: This deploys the infrastructure and updates the backend code
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: [ push ]
runs:
  image: ubuntu-latest
jobs:
  Build-and-Deploy:
    runs-on: ubuntu-latest
    steps:
      - run: echo "Building and testing..."
        displayName: 'Build and Test'
      - run: echo "Deploying to Dev..."
        displayName: 'Deploy to Dev'
        env:
          AWS_REGION: 'sa-east-1'
          AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
          AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
  Build-and-Deploy-Prod:
    runs-on: ubuntu-latest
    steps:
      - run: echo "Building and testing..."
        displayName: 'Build and Test'
      - run: echo "Deploying to Production..."
        displayName: 'Deploy to Production'
        env:
          AWS_REGION: 'sa-east-1'
          AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
          AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}